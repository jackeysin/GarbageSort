<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>GarbageSort Image Upload</title>
        <style>
            body{
                background-color: #07B26C;
            }
        </style>
        <script src="https://kit.fontawesome.com/4cd36f0279.js" crossorigin="anonymous"></script>
    </head>

    <body>
        <header style = "font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif, sans-serif; color: white; text-shadow:  black;font-size: 30px">
            
            <h1 align="center">Garbage Sort</h1>

        </header>
        
        <header style="font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;"></header>
        <!-- UPLOAD IMAGE -->
        <p>
            <input type="file"  accept="image/*" name="image" id="garbageUploadImage"  onchange="encodeImageFileAsURL(this)" style="display: none;">
        </p>
        <p>
            <label 
                for="garbageUploadImage" style="cursor: pointer; color: #156F2B; padding: 10px; background-color: #86EC9F; border: 3px solid green  ;
                    border-radius: 100px; font-family: verdana; margin-left: 565px;">
                    Upload Image    
            </label>
            <p>
            <label for="output" style="margin-left: 587px; background-color: #86EC9F; margin: center;"> </label>
             <input type="textbox" name="output" id="output" size="9" style="color: white;;background-color: #156F2B; text-align: center;"></input>
            </p>
        </p>

        <!-- DRAG AND DROP AREA -->
        <!--w
        <p> 
        
        style="font-family: calibri; border: 4px dashed black; background-color: #F3F3F3; height: 250px; width: 250px; text-align: center;">
            no image selected
        
            <img src="noImage.png" width="500" id="imageNotSelected" style="visibility: visible;">
        </p>
        -->
        
        <!-- IMAGE PREVIEW -->
        <p>
            <img id="output" width="500" />
        </p>

        <script>

            function encodeImageFileAsURL(element) {
            var file = element.files[0];
            var reader = new FileReader();
            reader.onloadend = function() {
            //console.log('RESULT', reader.result)
            fetch('https://nodal-deck-229102.appspot.com/image', {method: 'POST', headers: {
                'Content-Type': 'application/json'},
                body: JSON.stringify({image: reader.result})}).then(function(res){
                return res.json().then(function(result){
                    //document.write(result);
                    document.getElementById('output').value = result;
                    
                        })
                    })
                }
                reader.readAsDataURL(file);
            }
        </script>
    </body>
</html>