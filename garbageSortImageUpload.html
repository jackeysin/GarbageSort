<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>GarbageSort Image Upload</title>
	</head>

	<body>
		<header style="font-family: georgia; ">
			<h1>The Garbage Sort Project</h1>
		</header>

		<!-- UPLOAD IMAGE -->
		<p>
			<input type="file"  accept="image/*" name="image" id="garbageUploadImage"  onchange="loadFile(event)" style="display: none;">
		</p>
		<p>
			<label 
				for="garbageUploadImage" style="cursor: pointer; color: #ffffff; padding: 10px; background-color: #52307c; border: 2px solid #3c1361;
					border-radius: 10px; font-family: verdana; ">Upload Image
			</label>
		</p>
		
		<!-- IMAGE PREVIEW -->
		<p>
			<img id="output" width="200" />
		</p>
		
		<input type="file" onchange="encodeImageFileAsURL(this)" />

		<script>
			// IMAGE PREVIEW SCRIPT
			// var loadFile = function(event) {
			// var image = document.getElementById('output');
			// image.src = URL.createObjectURL(event.target.files[0]);
			// console.log(image.src);
			// var reader = new FileReader();
			// var base64 = reader.readAsDataURL(event.target.files[0]);
			// console.log(base64);
			// };
 function encodeImageFileAsURL(element) {
  var file = element.files[0];
  var reader = new FileReader();
  reader.onloadend = function() {
	//console.log('RESULT', reader.result)
	fetch('http://localhost:3000/image', {method: 'POST', headers: {
		'Content-Type': 'application/json'},
		body: JSON.stringify({image: reader.result})}).then(function(res){
			return res.json().then(function(result){
				alert(result);
			})
		})
  }
  reader.readAsDataURL(file);
}
		</script>
	
	</body>
</html>
